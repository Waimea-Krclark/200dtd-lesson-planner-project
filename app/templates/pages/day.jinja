{#=====================================================
  Day page
  - Shows lessons for a single day with details
  - Has a delete link to remove lessons
=====================================================#}

{% extends 'pages/base.jinja' %}


{% block title %}

    Lesson Planner - {{ day.name }}

{% endblock %}


{% block content %}
    

    <section id="DayHeader">
        <h1 class="uppercase primaryText">{{ day.code }}</h1>
        <h1 class="defaultText">{{ day.name }}</h1>
    </section>

    {% for lesson in lessons %}      
        <button id="{{ lesson.id }}" class="dropbtn" onclick='dropdown({{ lesson.id }})'>
            <p>{{ lesson.time | nicetime }}</p> <p>{{ lesson.name }}</p> <img src="/static/images/dropdown-arrow.svg" alt="Dropdown arrow" id="{{ lesson.id }}" class="dropdownarrow">
        </button>
        <article id="{{ lesson.id }}" class="DropdownCollapsed">
            <p class="lessonDesc">{{ lesson.description }}</p>
            <article class="resources">
                <h4 class="defaultText">Resources:</h4>

                {% set lesson_resources = resources | selectattr('lesson_id', 'equalto', lesson.id) | list %}
                
                {% if lesson_resources %}
                    {% for resource in lesson_resources %}
                        <p><a class="displayedResource" href="{{ resource.link }}" target="_blank" rel="noopener noreferrer" role="button">{{ resource.name }}</a></p>
                    {% endfor %}
                {% else %}
                    <p>No Resources</p>
                {% endif %}
                <a type="button" href="/resources/" class="primaryButton">View all</a>  
                
            </article>
            <a type="button" href="/delete/{{ lesson.id }}/{{ day.code }}" onclick="return confirm('Are you sure you want to delete this lesson?');" class="primaryButton deleteLesson">Remove Lesson</a>
        </article>
    {% else %}
        <p>None!</p>
    
    {% endfor %}



{% endblock %}

